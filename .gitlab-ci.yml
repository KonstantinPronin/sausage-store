include:
  - local: "backend/.gitlab-ci.yml"
  - local: "frontend/.gitlab-ci.yml"
  - template: Security/SAST.gitlab-ci.yml

variables:
  VERSION: 1.0.${CI_PIPELINE_ID}
  M2_REPO: ${CI_PROJECT_DIR}/.m2/repository
    
stages:
  - build
  - test
  - upload
  - notify

spotbugs-sast:
  stage: test
  variables:
    COMPILE: "false"
    SAST_JAVA_VERSION: 16
    MAVEN_REPO_PATH: ${M2_REPO}
  needs:
    - build-backend

cache:
  paths:
    - ${M2_REPO}
    - frontend/dist/frontend 